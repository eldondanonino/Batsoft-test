(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{29:function(e,t,n){},31:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var s=n(0),o=n.n(s),c=n(21),a=n.n(c),r=(n(29),n(8)),i=n.n(r),u=n(15),l=n(9),h=n(10),p=n(6),g=n(12),d=n(11),j=(n(31),n(2)),b=n(24),O=n(1),f=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{children:Object(O.jsx)("button",{onClick:function(){return e.props.method()},children:this.props.text})})}}]),n}(s.Component),v=n(22),x=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:this.props.type,placeholder:this.props.placeholder,value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)}})})}}]),n}(s.Component),m=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).SendValues=s.SendValues.bind(Object(p.a)(s)),s.SetValue=s.SetValue.bind(Object(p.a)(s)),s.ResetValue=s.ResetValue.bind(Object(p.a)(s)),s.state={username:"",password:""},s}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.ResetValue(),console.log("login form mounted")}},{key:"SetValue",value:function(e,t){t=t.trim(),this.setState(Object(v.a)({},e,t)),console.log("".concat(e," : ").concat(t))}},{key:"ResetValue",value:function(){this.setState({username:"",password:""})}},{key:"SendValues",value:function(e,t){if(console.log("Received :\n Username : ".concat(e," , Password : ").concat(t)),e||t){if(!e||!t)return e||console.log("Invalid request : wrong un"),t||console.log("Invalid request : wrong pw"),void this.ResetValue();try{console.log("Sending to the APP : \nUsername : ".concat(e," , Password : ").concat(t)),this.props.LogIn(e,t)}catch(n){console.log(n)}}else console.log("No un and no pw")}},{key:"render",value:function(){var e=this,t=this.state.username,n=this.state.password;return Object(O.jsxs)("div",{children:[Object(O.jsx)(x,{placeholder:"username",type:"text",value:t?this.state.username:"",onChange:function(t){return e.SetValue("username",t)}}),Object(O.jsx)(x,{placeholder:"password",type:"password",value:n?this.state.password:"",onChange:function(t){return e.SetValue("password",t)}}),Object(O.jsx)(f,{text:"Hi :) ",method:function(){return e.SendValues(t,n)}})]})}}]),n}(s.Component),A=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).handleLogOut=e.handleLogOut.bind(Object(p.a)(e)),e.handleLogIn=e.handleLogIn.bind(Object(p.a)(e)),e.handleSignup=e.handleSignup.bind(Object(p.a)(e)),e.getStatus=e.getStatus.bind(Object(p.a)(e)),e.sleep=e.sleep.bind(Object(p.a)(e)),e.state={login:!1,user:""},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"),this.getStatus()}},{key:"sleep",value:function(e){var t=Date.now(),n=null;do{n=Date.now()}while(n-t<e)}},{key:"handleLogIn",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SENDING TO THE API : ".concat(t," + ").concat(n)),e.prev=1,e.next=4,fetch("/login",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})});case 4:return s=e.sent,e.next=7,s.json();case 7:o=e.sent,console.log("Message from the server : ".concat(o.message)),o&&o.success?(this.setState({user:o.username,login:!0}),console.log("Login successful, welcome ".concat(this.state.user)),this.setState({login:!0})):console.log("Error while logging in (not critical)"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("ERROR WHILE LOGGING IN");case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleLogOut",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("UN : ".concat(t)),e.prev=1,e.next=4,fetch("/logout",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t})});case 4:return n=e.sent,e.next=7,n.json();case 7:s=e.sent,console.log("Server respons : ".concat(s.message)),s&&s.success?(this.setState({user:""}),this.setState({login:!1}),console.log("Logout successful")):console.log("Error while logging out (not critical)"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("ERROR WHILE LOGGING OUT");case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getStatus",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Sending a status request to the back"),e.next=4,fetch("/getstatus",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({logged:1})});case 4:return t=e.sent,e.next=7,t.json();case 7:if(n=e.sent,console.log("Server respons : ".concat(n.message)),!n||!n.success){e.next=15;break}return console.log("Logged in : ".concat(n.username)),this.setState({login:!0}),e.abrupt("return",n.success);case 15:return console.log("Error while contacting the server (not critical)"),this.setState({login:!1}),e.abrupt("return",n.success);case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(0),console.log("ERROR WHILE CONTACTING THE SERVER"),this.setState({login:!1}),e.abrupt("return",0);case 25:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleSignup",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SENDING TO THE API : ".concat(t," + ").concat(n)),e.prev=1,e.next=4,fetch("/signup",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})});case 4:return s=e.sent,e.next=7,s.json();case 7:o=e.sent,console.log("Message from the server : ".concat(o.message)),o&&o.success?console.log("Signup successful, welcome ".concat(this.state.user)):console.log("Error while signing up (not critical)"),j.a,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("ERROR WHILE SIGNING UP");case 16:case"end":return e.stop()}}),e,this,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.sleep(50),this.getStatus();var t=this.state.login;return console.log(t),Object(O.jsx)(b.a,{children:Object(O.jsxs)("div",{children:[Object(O.jsxs)(j.b,{path:"/",exact:!0,children:[!0===t?Object(O.jsx)(j.a,{push:!0,to:"/main-menu"}):console.log("not logged in"),Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"LoginPage"}),Object(O.jsx)(m,{LogIn:this.handleLogIn})]})]}),Object(O.jsx)(j.b,{path:"/signup",exact:!0,children:Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:" Signup page "}),Object(O.jsx)(m,{LogIn:this.handleSignup})]})}),Object(O.jsxs)(j.b,{path:"/main-menu",exact:!0,children:[!0!==t?Object(O.jsx)(j.a,{push:!0,to:"/"}):console.log("logged in"),Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"You are logged in!"}),Object(O.jsx)("h3",{children:"Main menu"}),Object(O.jsx)(f,{text:"Log Out",method:function(){return e.handleLogOut("daniil")}})]})]})]})})}}]),n}(s.Component),S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,s=t.getFID,o=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),s(e),o(e),c(e),a(e)}))};a.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(A,{})}),document.getElementById("root")),S()}},[[38,1,2]]]);
//# sourceMappingURL=main.7178534b.chunk.js.map