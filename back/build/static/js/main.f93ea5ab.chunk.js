(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{21:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),c=n(23),r=n.n(c),o=(n(30),n(8)),i=n.n(o),u=n(15),l=n(9),h=n(10),p=n(7),j=n(12),g=n(11),d=(n(32),n(16)),b=n(2),O=n(1),f=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:"submit",onClick:function(){return e.props.method()},children:this.props.text})})}}]),n}(s.Component),m=n(24),v=(n(21),function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{children:Object(O.jsx)("input",{className:"inputfield",type:this.props.type,placeholder:this.props.placeholder,value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)}})})}}]),n}(s.Component)),x=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).SendValues=s.SendValues.bind(Object(p.a)(s)),s.SetValue=s.SetValue.bind(Object(p.a)(s)),s.ResetValue=s.ResetValue.bind(Object(p.a)(s)),s.state={username:"",password:""},s}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.ResetValue()}},{key:"SetValue",value:function(e,t){t=t.trim(),this.setState(Object(m.a)({},e,t))}},{key:"ResetValue",value:function(){this.setState({username:"",password:""})}},{key:"SendValues",value:function(e,t){if(console.log("Received :\n Username : ".concat(e," , Password : ").concat(t)),e||t){if(!e||!t)return e||alert("Invalid request : no username"),t||alert("Invalid request : no password"),void this.ResetValue();try{this.props.LogIn(e,t),this.ResetValue()}catch(n){console.log(n)}}else console.log("No un and no pw")}},{key:"render",value:function(){var e=this,t=this.state.username,n=this.state.password;return Object(O.jsxs)("div",{className:"centerer",children:[Object(O.jsx)(v,{placeholder:"username",type:"text",value:t?this.state.username:"",onChange:function(t){return e.SetValue("username",t)}}),Object(O.jsx)(v,{placeholder:"password",type:"password",value:n?this.state.password:"",onChange:function(t){return e.SetValue("password",t)}}),Object(O.jsx)(f,{text:"Login!",method:function(){return e.SendValues(t,n)}})]})}}]),n}(s.Component),S=function(e){Object(j.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).handleLogOut=e.handleLogOut.bind(Object(p.a)(e)),e.handleLogIn=e.handleLogIn.bind(Object(p.a)(e)),e.handleSignup=e.handleSignup.bind(Object(p.a)(e)),e.getStatus=e.getStatus.bind(Object(p.a)(e)),e.state={login:!1,user:""},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.getStatus()}},{key:"handleLogIn",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var s,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SENDING TO THE API : ".concat(t," + ").concat(n)),e.prev=1,e.next=4,fetch("/login",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})});case 4:return s=e.sent,e.next=7,s.json();case 7:a=e.sent,console.log("Message from the server : ".concat(a.message)),a&&a.success?(this.setState({user:a.username,login:!0}),alert("Login successful, welcome ".concat(this.state.user)),this.setState({login:!0})):alert(a.message),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("ERROR WHILE LOGGING IN");case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleLogOut",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("logging out..."),e.prev=1,e.next=4,fetch("/logout",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:""})});case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,console.log("Server response : ".concat(n.message)),n&&n.success?(this.getStatus(),alert("Logout successful")):alert(n.message),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("ERROR WHILE LOGGING OUT");case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getStatus",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Sending a status request to the back"),e.next=4,fetch("/getstatus",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({logged:1})});case 4:return t=e.sent,e.next=7,t.json();case 7:if(n=e.sent,console.log("Server respons : ".concat(n.message)),!n||!n.success){e.next=15;break}return console.log("Logged in : ".concat(n.username)),this.setState({login:!0}),e.abrupt("return",n.success);case 15:return console.log("Error while contacting the server (not critical)"),this.setState({login:!1}),e.abrupt("return",n.success);case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(0),console.log("ERROR WHILE CONTACTING THE SERVER"),this.setState({login:!1}),e.abrupt("return",0);case 25:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleSignup",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var s,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SENDING TO THE API : ".concat(t," + ").concat(n)),e.prev=1,e.next=4,fetch("/signup",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})});case 4:return s=e.sent,e.next=7,s.json();case 7:a=e.sent,console.log("Message from the server : ".concat(a.message)),a&&a.success?alert("Signup successful, try logging in!"):alert(a.message),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("ERROR WHILE SIGNING UP");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(O.jsx)(d.a,{children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)(b.b,{path:"/",exact:!0,children:[function(){return e.getStatus()},!0===this.state.login?Object(O.jsx)(b.a,{push:!0,to:"/main-menu"}):Object(O.jsx)(O.Fragment,{}),Object(O.jsxs)("div",{className:"login-form",children:[Object(O.jsx)("p",{className:"title",children:"Login Page"}),Object(O.jsx)(x,{LogIn:this.handleLogIn}),Object(O.jsx)("br",{}),Object(O.jsx)(d.b,{to:"/sign-up",children:"Sign up now!"})]})]}),Object(O.jsxs)(b.b,{path:"/sign-up",exact:!0,children:[function(){return e.getStatus()},!0===this.state.login?Object(O.jsx)(b.a,{push:!0,to:"/main-menu"}):Object(O.jsx)(O.Fragment,{}),Object(O.jsxs)("div",{className:"login-form",children:[Object(O.jsx)("h1",{className:"title",children:" Signup page "}),Object(O.jsx)(x,{LogIn:this.handleSignup}),Object(O.jsx)("br",{}),Object(O.jsx)(d.b,{to:"/",children:"Main Menu"})]})]}),Object(O.jsxs)(b.b,{path:"/main-menu",exact:!0,children:[function(){return e.getStatus()},!0!==this.state.login?Object(O.jsx)(b.a,{push:!0,to:"/"}):Object(O.jsx)(O.Fragment,{}),Object(O.jsxs)("div",{className:"centerer",children:[Object(O.jsx)("h1",{className:"title",children:"Main menu"}),Object(O.jsx)("p",{children:"Here is the exclusive content : a person that does not exist! "}),Object(O.jsx)("img",{src:"https://thispersondoesnotexist.com/image",width:"600",height:"600"}),Object(O.jsx)(f,{text:"Log Out",method:function(){return e.handleLogOut()}})]})]})]})})}}]),n}(s.Component),y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),s(e),a(e),c(e),r(e)}))};r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root")),y()}},[[39,1,2]]]);
//# sourceMappingURL=main.f93ea5ab.chunk.js.map