(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{32:function(e,t,n){},34:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var o=n(0),s=n.n(o),c=n(16),a=n.n(c),r=(n(32),n(15)),i=n.n(r),u=n(19),l=n(9),h=n(10),d=n(8),p=n(12),j=n(11),g=(n(34),n(27)),b=n(25),O=n(3),f=n(2),v=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{children:Object(f.jsx)("button",{onClick:function(){return e.props.method()},children:this.props.text})})}}]),n}(o.Component),x=n(24),m=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsx)("div",{children:Object(f.jsx)("input",{type:this.props.type,placeholder:this.props.placeholder,value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)}})})}}]),n}(o.Component),y=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(e){var o;return Object(l.a)(this,n),(o=t.call(this,e)).SendValues=o.SendValues.bind(Object(d.a)(o)),o.SetValue=o.SetValue.bind(Object(d.a)(o)),o.ResetValue=o.ResetValue.bind(Object(d.a)(o)),o.state={username:"",password:""},o}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.ResetValue()}},{key:"SetValue",value:function(e,t){t=t.trim(),this.setState(Object(x.a)({},e,t)),console.log("".concat(e," : ").concat(t))}},{key:"ResetValue",value:function(){this.setState({username:"",password:""})}},{key:"SendValues",value:function(e,t){if(console.log("Received :\n Username : ".concat(e," , Password : ").concat(t)),e||t){if(!e||!t)return e||console.log("Invalid request : wrong un"),t||console.log("Invalid request : wrong pw"),void this.ResetValue();try{console.log("Sending to the APP : \nUsername : ".concat(e," , Password : ").concat(t)),this.props.LogIn(e,t)}catch(n){console.log(n)}}else console.log("No un and no pw")}},{key:"render",value:function(){var e=this,t=this.state.username,n=this.state.password;return Object(f.jsxs)("div",{children:[Object(f.jsx)(m,{placeholder:"username",type:"text",value:t?this.state.username:"",onChange:function(t){return e.SetValue("username",t)}}),Object(f.jsx)(m,{placeholder:"password",type:"password",value:n?this.state.password:"",onChange:function(t){return e.SetValue("password",t)}}),Object(f.jsx)(v,{text:"Hi :) ",method:function(){return e.SendValues(t,n)}})]})}}]),n}(o.Component),w=function(e){Object(p.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).handleLogOut=e.handleLogOut.bind(Object(d.a)(e)),e.handleLogIn=e.handleLogIn.bind(Object(d.a)(e)),e.state={login:!1,user:""},e}return Object(h.a)(n,[{key:"handleLogIn",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SENDING TO THE API : ".concat(t," + ").concat(n)),e.prev=1,e.next=4,fetch("/login",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})});case 4:return o=e.sent,e.next=7,o.json();case 7:s=e.sent,console.log("Message from the server : ".concat(s.message)),s&&s.success?(this.setState({user:s.username,login:!0}),console.log("Login successful, welcome ".concat(this.state.user))):console.log("Error while logging in (not critical)"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("ERROR WHILE LOGGING IN");case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleLogOut",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("UN : ".concat(t)),e.prev=1,e.next=4,fetch("/logout",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t})});case 4:return n=e.sent,e.next=7,n.json();case 7:o=e.sent,console.log("Server respons : ".concat(o.message)),o&&o.success?(this.state.user="",console.log("Logout successful")):console.log("Error while logging out (not critical)"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("ERROR WHILE LOGGING OUT");case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.login;return console.log("login at begining of render : ".concat(t)),Object(f.jsx)(b.a,{children:Object(f.jsxs)("div",{children:[!0===t?Object(f.jsx)(O.a,{push:!0,to:"/main-menu"}):Object(f.jsx)(O.a,{push:!0,to:"/"}),Object(f.jsxs)(O.b,{path:"/",exact:!0,children:[!0===t?Object(f.jsx)(O.a,{push:!0,to:"/main-menu"}):console.log("not logged in"),Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"LoginPage"}),Object(f.jsx)(y,{LogIn:this.handleLogIn})]})]}),Object(f.jsxs)(O.b,{path:"/main-menu",exact:!0,children:[!0!==t?Object(f.jsx)(O.a,{push:!0,to:"/"}):console.log("logged in"),Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"You are logged in!"}),Object(f.jsx)("h3",{children:"Main menu"}),Object(f.jsx)(v,{text:"Log Out",method:function(){return e.handleLogOut("daniil")}})]})]})]})})}}]),n}(o.Component),L=Object(g.a)(w),S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,o=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),o(e),s(e),c(e),a(e)}))};a.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(L,{})}),document.getElementById("root")),S()}},[[40,1,2]]]);
//# sourceMappingURL=main.1c4e9e30.chunk.js.map